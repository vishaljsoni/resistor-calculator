<main class="container">
  <header>
    <h1>{{ title }}</h1>
    <p class="subtitle">Select resistor color bands and calculate resistance with tolerance.</p>
  </header>

  <section class="card" *ngIf="loading">
    <p>Loading color bands...</p>
  </section>

  <section class="card" *ngIf="!loading">
    <div class="form-grid">
      <label>
        Band A
        <select [(ngModel)]="bandA" (ngModelChange)="recalculate()">
          <option [ngValue]="undefined">-- select --</option>
          <option *ngFor="let ring of bandAOptions" [ngValue]="ring">{{ ring.RingDisplayValue }}</option>
        </select>
      </label>

      <label>
        Band B (optional)
        <select [(ngModel)]="bandB" (ngModelChange)="recalculate()">
          <option [ngValue]="undefined">-- none --</option>
          <option *ngFor="let ring of bandBOptions" [ngValue]="ring">{{ ring.RingDisplayValue }}</option>
        </select>
      </label>

      <label>
        Band C (multiplier)
        <select [(ngModel)]="bandC" (ngModelChange)="recalculate()">
          <option [ngValue]="undefined">-- none --</option>
          <option *ngFor="let ring of bandCOptions" [ngValue]="ring">{{ ring.RingDisplayValue }}</option>
        </select>
      </label>

      <label>
        Band D (tolerance)
        <select [(ngModel)]="bandD" (ngModelChange)="recalculate()">
          <option *ngFor="let ring of bandDOptions" [ngValue]="ring">{{ ring.RingDisplayValue }}</option>
        </select>
      </label>
    </div>

    <div class="preview">
      <div class="band" [style.backgroundColor]="bandAColor"></div>
      <div class="band" [style.backgroundColor]="bandBColor"></div>
      <div class="band" [style.backgroundColor]="bandCColor"></div>
      <div class="band" [style.backgroundColor]="bandDColor"></div>
    </div>

    <button type="button" (click)="recalculate()">Calculate</button>

    <div class="error" *ngIf="error">{{ error }}</div>
    <div class="result" *ngIf="result">
      <div><strong>Actual:</strong> {{ result.ActualOhm | number:'1.0-2' }} Ω</div>
      <div><strong>Minimum:</strong> {{ result.MinimumOhm | number:'1.0-2' }} Ω</div>
      <div><strong>Maximum:</strong> {{ result.MaximumOhm | number:'1.0-2' }} Ω</div>
    </div>
  </section>
</main>
